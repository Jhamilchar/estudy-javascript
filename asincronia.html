<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asíncronia en JavaScript</title>
</head>
<body>
    <h1>Asíncronia en JavaScript</h1>

    <script>

    // console.log("Inicio");
    // setTimeout(() => {
    //     console.log("Ejecutando un setTimeout esto se ejecuta una sola vez ");
    // }, 2000);


    // setInterval(() => {
    //     console.log("Ejecutando un setInterval esto se ejecuta indefinidamente cada cierto intervalo de tiempo");
    // }, 10000);


    // let temporizador = setTimeout(() => {
    //     console.log(new Date().toLocaleString());
    // }, 1000);

    // clearTimeout(temporizador);
    // console.log("Despues del clear");


    // let temporizador = setInterval(() => {
    //     console.log(new Date().toLocaleString());
    // }, 1000);

    // clearInterval(temporizador);
    // console.log("Despues del clear");


    //Antes de explicar como funciona  el modelo de JavaScript es importante entender algunos conceptos

    // procesamiento single thread y multi thread
    // Operaciones de CPU y Operaciones de I / O 
    // Operaciones concurrentes y paralelas
    // Operaciones BLoqueantes y no bloqueantes 
    // Operaciones síncronas y asíncronas

    // Javascript usa un modelo asincrono y no bloqueante, con un lopp de eventos implementado en un solo hilo (single thread) para operaciones de entrada y salida (input/outpu)

        /*
    // Codigo sincrono bloqueante

    (() => {
        console.log("Codigo sincrono");
        console.log("Inicio");

        function dos() {
            console.log("Dos");
        }

        function uno() {
            console.log("Uno");
            dos();
            console.log("Tres");
        }
        
        uno();
        console.log("*********************************");
    })();

    // Codigo sincrono no bloqueante

    (() => {
        console.log("Codigo asincrono");
        console.log("Inicio");

        function dos() {
            setTimeout(function() {
                console.log("Dos");
            }, 1000);
        }

        function uno() {
            setTimeout(function() {
                console.log("uno");
            }, 0);
            dos();
            console.log("Tres");
        }

        uno();
        console.log("Fin");
    })();
    */


    //Callbacks


    // function cuadradoCallback(value, callback) {
    //     setTimeout(() => {
    //         callback(value, value*value)
    //     }, 0 | Math.random() *1000);
    // }

    // cuadradoCallback(0, (value, result) => {
    //     console.log("Inicia callback");
    //     console.log(`Callback: ${value},${result}`);
    //     cuadradoCallback(4, (value, result) => {
    //         console.log("Inicia callback");
    //         console.log(`Callback: ${value},${result}`);
    //             cuadradoCallback(6, (value, result) => {
    //             console.log("Inicia callback");
    //             console.log(`Callback: ${value},${result}`);
    //             });
    //     });
    // });

    // setTimeout(function(){
    // console.log("Esto debería aparecer primero");
    // }, 0);
    // console.log("Sorpresa!");

    // Sorpresa!
    // Esto debería aparecer primero




    // setTimeout(function(){
    // console.log("Etapa 1 completada");
    // setTimeout(function(){
    //     console.log("Etapa 2 completada");
    //     setTimeout(function(){
    //     console.log("Etapa 3 completada");
    //     setTimeout(function(){
    //         console.log("Etapa 4 completada");
    //         // Podríamos continuar hasta el infinito...
    //     }, 4000);
    //     }, 3000);
    // }, 2000);
    // }, 1000);
    // console.log("Sorpresa!");
    // console.log("sorpresa2!");



    //Promesas

    // function cuadradoPromise(value) {
    // if(typeof value !== "number") {
    //     return Promise.reject (`Error, el valor "${value}" ingresado no es un numero`);  
    //     } 


    //     return new Promise((resolve, reject )=> {
    //         setTimeout(() => {
    //             resolve({
    //                value,
    //                result: value*value 
    //             });
    //         }, 0 | Math.random() *1000);
    //     });
    // }

    // cuadradoPromise("0")
    // .then((obj) => {
    //     // console.log(obj);
    //     console.log("Inicio promise");;
    //     console.log(`Promise: ${obj.value},${obj.result}`);
    //     return cuadradoPromise(1);
    // })
    // .then(obj => {
    //     console.log(`Promise: ${obj.value},${obj.result}`);
    //     return cuadradoPromise(2);
    // })
    // .then(obj => {
    //     console.log(`Promise: ${obj.value},${obj.result}`);
    //     return cuadradoPromise(3);
    // })
    // .then(obj => {
    //     console.log(`Promise: ${obj.value},${obj.result}`);
    //     return cuadradoPromise(4);
    // })
    // .then(obj => {
    //     console.log(`Promise: ${obj.value},${obj.result}`);
    //     return cuadradoPromise(5);
    // })
    // .then(obj => {
    //     console.log(`Promise: ${obj.value},${obj.result}`);
    //     return cuadradoPromise("Fin promise");
    // })
    // .catch(err => console.log(err));




    // Async-await


    // function cuadradoPromise(value) {
    // if(typeof value !== "number") {
    //     return Promise.reject (`Error, el valor "${value}" ingresado no es un numero`);  
    //     } 

    //     return new Promise((resolve, reject )=> {
    //         setTimeout(() => {
    //             resolve({
    //                value,
    //                result: value*value 
    //             });
    //         }, 0 | Math.random() *5000);
    //     });
    // }


    // async function funcionAsyncronaDeclarada() {
    //     try {
    //     console.log("Inicio async function");            

    //         let obj =  await cuadradoPromise(0);
    //         console.log(`Async function: ${obj.value}, ${obj.result}`);

    //         obj = await cuadradoPromise(1);
    //         console.log(`Async function: ${obj.value}, ${obj.result}`);

    //         obj = await cuadradoPromise(2);
    //         console.log(`Async function: ${obj.value}, ${obj.result}`);

    //         obj = await cuadradoPromise(3);
    //         console.log(`Async function: ${obj.value}, ${obj.result}`);

    //         obj = await cuadradoPromise(4);
    //         console.log(`Async function: ${obj.value}, ${obj.result}`);

    //         obj = await cuadradoPromise(5);
    //         console.log(`Async function: ${obj.value}, ${obj.result}`);

    //         console.log("Fin de async function");

    //         } catch (err) {
    //         console.error(err)
    //     }
    // }

    // funcionAsyncronaDeclarada();
    

    // const funcionAsincronaExpresada = async () => {
    //     try {
    //     console.log("Inicio async function");            

    //         let obj =  await cuadradoPromise(6);
    //         console.log(`Async function: ${obj.value}, ${obj.result}`);

    //         obj = await cuadradoPromise(7);
    //         console.log(`Async function: ${obj.value}, ${obj.result}`);

    //         obj = await cuadradoPromise(8);
    //         console.log(`Async function: ${obj.value}, ${obj.result}`);

    //         obj = await cuadradoPromise("8");
    //         console.log(`Async function: ${obj.value}, ${obj.result}`);

    //         obj = await cuadradoPromise(10);
    //         console.log(`Async function: ${obj.value}, ${obj.result}`);

    //         obj = await cuadradoPromise(11);
    //         console.log(`Async function: ${obj.value}, ${obj.result}`);

    //         console.log("Fin de async function");
    //         } catch (err) {
    //             console.error(err)
    //     }
    // }

    // funcionAsincronaExpresada();




    </script>


</body>
</html>